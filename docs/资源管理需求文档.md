# 资源管理区需求文档

## 文档信息
- **文档版本**：v1.0
- **创建日期**：2025-01-XX
- **文档目的**：定义资源管理区（文件树区域）的完整功能需求和交互规范
- **适用范围**：Binder 应用的文件树、工具栏、状态栏等资源管理相关功能

---

## 一、资源管理区整体架构

### 1.1 区域划分

资源管理区位于应用左侧，包含以下主要部分：

1. **顶部工具栏**：操作按钮区域
2. **主内容区**：三个分类标签页（工作区、记忆库、历史记录）
3. **底部状态栏**：全局状态信息显示

### 1.2 布局结构

```
┌─────────────────────────────────┐
│  顶部工具栏（图标按钮组）          │
├─────────────────────────────────┤
│  ▼ 工作区                        │
│    ├─ 文件1.md                  │
│    ├─ 文件2.txt                │
│    └─ 文件夹/                   │
│                                 │
│  ▶ 记忆库（可折叠）              │
│                                 │
│  ▶ 历史记录（可折叠）            │
│                                 │
│  （可滚动区域）                  │
│                                 │
├─────────────────────────────────┤
│  底部状态栏（工作区路径等）        │
└─────────────────────────────────┘
```

**布局说明**：
- 三个功能区域采用可展开/折叠的独立树结构（类似 Cursor 编辑器样式）
- 每个区域都有展开/折叠图标（▼/▶）
- 默认工作区区域展开，记忆库和历史记录可折叠
- 所有区域在同一个滚动容器内，支持整体滚动

---

## 二、顶部工具栏需求

### 2.1 工具栏布局

工具栏位于资源管理区顶部，采用水平排列的图标按钮组，按钮之间保持适当间距。

### 2.2 新建文件夹按钮

#### 2.2.1 按钮样式
- 使用独立图标按钮（不使用文字）
- 图标：文件夹加号图标（文件夹图标 + 加号）
- 按钮大小：中等尺寸，与其他工具栏按钮保持一致
- 悬停效果：显示工具提示"新建文件夹"

#### 2.2.2 交互行为

**单次点击**：
- 直接创建新文件夹
- 创建后自动进入重命名状态
- 如果未选择工作区，显示提示信息引导用户选择工作区

**交互反馈**：
- 创建成功：显示成功提示（Toast）
- 创建失败：显示错误提示，说明失败原因

### 2.3 新建文件按钮

#### 2.3.1 按钮样式
- 使用复合图标按钮（带下拉菜单指示）
- 图标：文件加号图标（文件图标 + 加号）
- 下拉指示：按钮右侧显示下拉箭头图标（▼）
- 按钮大小：中等尺寸，与其他工具栏按钮保持一致
- 悬停效果：显示工具提示"新建文件"

#### 2.3.2 交互行为

**单次点击主按钮区域**：
- 弹出下拉菜单
- 菜单选项显示文件类型：
  - Markdown (.md)
  - 文本文件 (.txt)
  - Word 文档 (.docx)
  - HTML (.html)
  - Excel (.xlsx)
  - PowerPoint (.pptx)
  - 其他格式（根据需求扩展）

**双击或快速两次点击主按钮区域**：
- 直接创建默认格式文件（.txt）
- 不显示菜单，立即执行创建操作
- 创建后自动进入重命名状态

**点击下拉箭头**：
- 弹出下拉菜单（与点击主按钮区域相同）

#### 2.3.3 菜单样式
- 下拉菜单采用标准下拉样式
- 菜单项支持键盘导航（上下箭头键）
- 点击菜单外部或按 ESC 键关闭菜单
- 菜单项支持图标+文字显示
- 每个文件类型有对应的图标标识

#### 2.3.4 交互反馈
- 创建成功：显示成功提示（Toast）
- 创建失败：显示错误提示，说明失败原因

### 2.4 搜索按钮

#### 2.4.1 按钮样式
- 图标：放大镜图标
- 工具提示：显示"搜索"

#### 2.4.2 交互行为

**点击按钮**：
- 在当前展开的区域中激活搜索功能
- 显示搜索输入框（可内联显示或弹出搜索面板）
- 搜索范围根据当前展开的区域确定：
  - 如果工作区区域展开：搜索文件树
  - 如果记忆库区域展开：搜索记忆项
  - 如果历史记录区域展开：搜索历史记录
  - 如果多个区域同时展开：在激活搜索的区域中搜索

**搜索功能**：
- 支持实时搜索（输入即搜索）
- 高亮显示匹配结果
- 支持快捷键（如 Cmd+F / Ctrl+F）快速激活搜索

### 2.5 云存储按钮（占位）

#### 2.5.1 按钮样式
- 图标：云朵图标
- 工具提示：显示"云存储（开发中）"
- 视觉状态：可显示为禁用或半透明状态，表示功能未实现

#### 2.5.2 交互行为
- 点击按钮：显示提示信息"云存储功能开发中"
- 或显示占位对话框，说明功能规划

#### 2.5.3 功能规划（未来）
- 同步工作区到云端
- 多设备同步
- 版本历史管理
- 协作功能

### 2.6 拓展按钮（占位）

#### 2.6.1 按钮样式
- 图标：三个点（更多操作图标）
- 工具提示：显示"更多操作"

#### 2.6.2 交互行为

**点击按钮**：
- 弹出下拉菜单
- 菜单选项（占位，后续扩展）：
  1. 导入文件
  2. 导出工作区
  3. 设置
  4. 其他功能（根据需求扩展）

#### 2.6.3 功能规划（未来）
- 批量操作
- 工作区管理
- 导入/导出功能
- 高级设置选项

### 2.6 工具栏其他功能规划

#### 2.6.1 刷新按钮（可选）
- 图标：刷新图标
- 功能：手动刷新当前标签页内容
- 工具提示：显示"刷新"

#### 2.6.2 视图切换（可选）
- 图标：列表/网格视图切换
- 功能：切换文件树显示方式（列表/树形）
- 工具提示：显示当前视图模式

#### 2.6.3 排序选项（可选）
- 图标：排序图标
- 功能：切换文件排序方式（名称/时间/类型）
- 工具提示：显示当前排序方式

---

## 三、主内容区分类区域

### 3.1 区域结构

主内容区显示三个独立的可展开/折叠区域，采用树形折叠面板样式（参考 Cursor 编辑器）。

**展示特点**：
- 每个区域都是独立的可展开/折叠面板
- 每个区域有标题栏，显示区域名称和展开/折叠图标
- 标题栏样式：左侧显示展开/折叠图标（▼/▶），右侧显示区域名称和图标
- 支持同时展开多个区域（与标签页不同，可以同时查看多个区域）
- 所有区域在同一个滚动容器内，支持整体垂直滚动
- 默认工作区区域展开，记忆库和历史记录区域默认折叠
- 每个区域的内容区域独立，互不干扰

**视觉样式**：
- 标题栏：使用浅色背景，与内容区域区分
- 展开图标：▼（向下箭头，表示已展开）
- 折叠图标：▶（向右箭头，表示已折叠）
- 区域分隔：区域之间使用细线分隔（可选）
- 悬停效果：标题栏悬停时背景色变化

### 3.2 工作区区域

#### 3.2.1 区域标识
- 区域名称：工作区
- 图标：文件夹图标（在标题栏左侧）
- 展开/折叠图标：▼（展开）/ ▶（折叠）
- 默认状态：展开（首次打开应用时默认展开）

#### 3.2.2 内容显示
- 显示当前工作区的文件树结构
- 支持文件树的所有现有功能：
  - 展开/折叠文件夹
  - 文件选择
  - 拖拽移动
  - 右键菜单操作
  - 文件操作（创建、删除、重命名、复制等）

#### 3.2.3 交互行为
- 点击标题栏或展开/折叠图标：展开或折叠工作区区域
- 标题栏显示当前工作区名称（如果有工作区）
- 未选择工作区时，显示提示信息引导用户选择工作区
- 展开时显示完整的文件树结构
- 折叠时只显示标题栏

### 3.3 记忆库区域

#### 3.3.1 区域标识
- 区域名称：记忆库
- 图标：大脑图标或记忆图标（在标题栏左侧）
- 展开/折叠图标：▼（展开）/ ▶（折叠）
- 默认状态：折叠（首次打开应用时默认折叠）
- 功能来源：将 AI 聊天窗口的记忆库功能迁移至此

#### 3.3.2 内容显示
- 显示记忆项列表
- 每个记忆项显示：
  - 实体名称
  - 记忆内容摘要（前几行）
  - 创建时间
  - 关联文件（如果有）
- 支持记忆项的展开/折叠查看详情

#### 3.3.3 交互行为
- 点击标题栏或展开/折叠图标：展开或折叠记忆库区域
- 展开时显示记忆项列表
- 折叠时只显示标题栏
- 支持记忆项的增删改查操作
- 支持搜索记忆项
- 支持筛选和排序
- 点击记忆项可查看详情或编辑

#### 3.3.4 与 AI 聊天窗口的集成
- 记忆库数据与 AI 聊天窗口共享
- 在记忆库中创建/编辑的记忆项，可在 AI 聊天中引用
- AI 聊天中自动创建的记忆项，同步显示在记忆库中

### 3.4 历史记录区域

#### 3.4.1 区域标识
- 区域名称：历史记录
- 图标：时钟图标或历史图标（在标题栏左侧）
- 展开/折叠图标：▼（展开）/ ▶（折叠）
- 默认状态：折叠（首次打开应用时默认折叠）
- 记录数量：最多记录 50 步操作

#### 3.4.2 内容显示
- 显示用户操作历史列表
- 每条历史记录显示：
  - 操作类型（创建文件、删除文件、编辑文件、移动文件等）
  - 操作对象（文件名、路径）
  - 操作时间
  - 操作结果（成功/失败）
- 按时间倒序排列（最新的在最上面）

#### 3.4.3 操作类型记录
需要记录的操作类型包括：
- 文件操作：创建、删除、重命名、移动、复制
- 文件夹操作：创建、删除、重命名
- 编辑操作：保存文件、修改文件
- AI 操作：AI 创建文件、AI 修改文件
- 其他操作：导入文件、导出文件等

#### 3.4.4 交互行为
- 点击标题栏或展开/折叠图标：展开或折叠历史记录区域
- 展开时显示历史记录列表
- 折叠时只显示标题栏
- 支持搜索历史记录
- 支持按操作类型筛选
- 支持按时间范围筛选
- 点击历史记录可查看详情或执行撤销操作（如果支持）

#### 3.4.5 历史记录管理
- 自动记录用户操作
- 当记录数量超过 50 条时，自动删除最旧的记录
- 支持清空历史记录（需确认）
- 历史记录持久化存储（应用重启后仍保留）

---

## 四、底部状态栏需求

### 4.1 状态栏布局

状态栏位于应用底部，横跨整个应用窗口宽度，采用水平布局。

### 4.2 工作区路径显示

#### 4.2.1 显示位置
- 位于状态栏左侧
- 紧贴左边缘，保持适当内边距

#### 4.2.2 显示内容
- 仅显示当前工作区的完整路径
- 不显示额外文字（如"当前工作区："等前缀）
- 路径过长时自动截断，显示省略号
- 悬停时显示完整路径（工具提示）

#### 4.2.3 样式要求
- 使用较小的字体
- 颜色：灰色或次要文本颜色
- 支持深色模式适配

### 4.3 状态栏其他功能规划

#### 4.3.1 中间区域（可选功能）

**文件统计信息**：
- 显示当前工作区的文件数量
- 显示文件夹数量
- 格式：如"12 个文件，3 个文件夹"

**选中文件信息**：
- 当选中文件时，显示文件信息
- 显示文件大小、修改时间等

**操作状态**：
- 显示当前正在执行的操作（如"正在保存..."）
- 显示操作进度（如果有）

#### 4.3.2 右侧区域（可选功能）

**应用状态指示器**：
- AI 服务连接状态
- 云同步状态（未来功能）
- 网络连接状态

**快捷操作**：
- 快速切换工作区按钮
- 设置按钮
- 帮助按钮

**系统信息**：
- 当前时间（可选）
- 应用版本信息（可选）

### 4.4 状态栏样式要求

- 高度：固定高度，约 24-28px
- 背景色：与主界面区分，使用浅色背景
- 边框：顶部边框，与主内容区分隔
- 字体：使用系统默认字体，较小字号
- 支持深色模式

---

## 五、交互规范

### 5.1 工具栏按钮交互

- 所有按钮支持悬停效果（颜色变化、工具提示）
- 按钮点击有视觉反馈（按下效果）
- 按钮支持键盘快捷键（如果适用）
- 按钮状态清晰（正常/禁用/激活）

### 5.2 区域展开/折叠交互

- 点击标题栏或展开/折叠图标立即展开或折叠区域
- 展开的区域有视觉反馈（背景色或边框）
- 支持键盘快捷键展开/折叠（如 Cmd+1/2/3）
- 展开/折叠时有平滑的动画过渡
- 支持记住用户的展开/折叠状态（可选）

### 5.3 状态栏交互

- 工作区路径可点击（未来可支持快速打开工作区选择）
- 状态信息实时更新
- 状态栏内容支持工具提示（悬停显示详细信息）

---

## 六、响应式设计

### 6.1 窗口大小适配

- 资源管理区支持宽度调整（现有功能）
- 工具栏按钮在小宽度时自动调整间距
- 状态栏内容在小宽度时自动隐藏次要信息

### 6.2 内容溢出处理

- 工具栏按钮过多时，支持横向滚动或折叠
- 主内容区支持垂直滚动（已实现）
- 状态栏内容过长时自动截断

---

## 七、可访问性要求

### 7.1 键盘导航

- 所有按钮支持 Tab 键导航
- 支持 Enter 键激活按钮
- 支持 ESC 键关闭菜单和对话框
- 标签页支持方向键切换

### 7.2 屏幕阅读器支持

- 所有按钮和标签页有适当的 ARIA 标签
- 状态信息有适当的 ARIA 描述
-