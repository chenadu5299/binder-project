# Binder 应用测试指南

## 应用状态
✅ 应用已启动并运行中

## 快速开始

### 第一步：配置 API Key（重要）

在使用 AI 功能前，需要先配置 API key。可以通过以下方式：

#### 方法 1：通过代码临时配置（开发测试）
在应用启动后，可以通过开发者工具控制台执行：
```javascript
// 配置 DeepSeek API key
await invoke('ai_save_api_key', {
    provider: 'deepseek',
    key: 'sk-de7beef46f714ecfaa511acc98d9294a'
});
```

#### 方法 2：通过应用 UI（如果已实现）
- 在设置中配置 API key
- 或在首次使用 AI 功能时提示输入

### 第二步：基础功能测试

1. **工作区管理**
   - 点击「打开工作区」或「新建工作区」
   - 选择一个文件夹
   - 验证文件树是否正确显示

2. **文件操作**
   - 点击「新建」按钮创建文件（Markdown、HTML、TXT）
   - 创建文件夹
   - 验证文件树自动刷新

3. **文件编辑**
   - 点击文件树中的文件打开
   - 验证编辑器正常显示
   - 测试输入和保存

### 第三步：AI 功能测试

#### 自动补全（Auto-completion）
1. 打开一个文档开始编辑
2. 输入至少 50 个字符的内容
3. 将光标停留在文字末尾
4. **等待 7 秒**（默认触发时间）
5. 应该看到**幽灵文字**（灰色半透明）出现在光标后
6. 按 **Tab** 接受补全
7. 按 **Esc** 取消补全

#### Inline Assist（Cmd+K）
1. 在编辑器中**选中一段文字**
2. 按 **Cmd+K**（Mac）或 **Ctrl+K**（Windows/Linux）
3. 应该弹出输入框
4. 输入指令，例如：
   - 「改得更委婉」
   - 「翻译成英文」
   - 「总结要点」
5. 按 **Enter** 执行
6. 查看 **Diff 视图**（红色删除，绿色添加）
7. 点击「接受」应用修改
8. 点击「拒绝」取消修改

#### 聊天窗口
1. 在右侧面板切换到「**AI 聊天**」标签
2. 如果还没有对话，会自动创建新对话
3. 在输入框中输入消息
4. 按 **Enter** 或点击「发送」
5. 查看 AI 的**流式响应**（逐字显示）
6. 测试**模型切换**（下拉菜单选择模型）
7. 测试**复制消息**（鼠标悬停在消息上）
8. 测试**重新生成**（点击重新生成按钮）

### 第四步：搜索和记忆库测试

#### 全文搜索
1. 在右侧面板切换到「**搜索**」标签
2. 在搜索框中输入关键词
3. 按 **Enter** 或点击「搜索」
4. 查看搜索结果列表
5. 结果应该显示：
   - 文档标题
   - 文档路径
   - 高亮的匹配片段
6. 点击搜索结果打开文档

**注意**：首次搜索前，文档需要先被索引。可以：
- 打开文档后自动索引
- 或手动触发索引（如果已实现）

#### 记忆库
1. 在右侧面板切换到「**记忆库**」标签
2. 点击「**添加记忆**」按钮
3. 填写记忆信息：
   - **实体类型**：选择（人物/事件/地点/概念/关系）
   - **实体名称**：输入名称
   - **内容**：输入详细描述
4. 点击「添加」保存
5. 验证记忆出现在列表中
6. 测试**搜索过滤**：在搜索框输入关键词
7. 测试**删除记忆**：点击记忆卡片上的删除按钮
8. 测试**打开来源文档**：点击记忆卡片上的文档路径

### 第五步：文档编辑功能测试

1. **Markdown 编辑**
   - 创建 .md 文件
   - 测试工具栏按钮（加粗、斜体、标题等）
   - 验证格式正确显示

2. **HTML 预览**
   - 打开 .html 文件
   - 验证格式保持完整

3. **图片插入**
   - 在编辑器中点击图片插入按钮
   - 选择图片文件
   - 验证图片正确插入和显示

4. **自动保存**
   - 编辑文档内容
   - 等待 2 秒（自动保存延迟）
   - 验证文件已保存

5. **工具栏功能**
   - 测试所有格式按钮
   - 验证功能正常

## 常见问题排查

### AI 功能不工作
- **检查 API key 是否配置**：在控制台执行配置命令
- **检查网络连接**：确保可以访问 AI API
- **查看控制台错误**：打开开发者工具（Cmd+Option+I）查看错误信息

### 搜索无结果
- **检查文档是否已索引**：首次使用需要索引
- **检查工作区是否正确**：确保选择了正确的工作区
- **尝试重新索引**：打开文档后应该自动索引

### 记忆库为空
- **检查工作区**：确保已选择工作区
- **检查数据库**：记忆存储在 `.binder/memories.db`
- **查看控制台错误**：检查是否有错误信息

### 应用窗口未显示
- **检查进程**：确认应用进程正在运行
- **检查端口**：Vite 应该在 1420 端口
- **重新启动**：停止进程后重新启动

## 测试检查清单

### 基础功能 ✅
- [ ] 打开/新建工作区
- [ ] 文件树显示和刷新
- [ ] 创建文件和文件夹
- [ ] 打开文件编辑
- [ ] 文件保存

### AI 功能 ✅
- [ ] 自动补全（7秒触发）
- [ ] Inline Assist（Cmd+K）
- [ ] 聊天窗口
- [ ] 模型切换
- [ ] 流式响应
- [ ] 复制消息
- [ ] 重新生成

### 搜索和记忆库 ✅
- [ ] 全文搜索
- [ ] 搜索结果展示
- [ ] 记忆库管理
- [ ] 添加/删除记忆
- [ ] 记忆搜索过滤

### 文档编辑 ✅
- [ ] Markdown 编辑
- [ ] HTML 预览
- [ ] 图片插入
- [ ] 自动保存
- [ ] 工具栏功能

## 下一步

测试完成后，如果发现问题，请：
1. 记录问题现象
2. 查看控制台错误信息
3. 提供复现步骤

祝测试顺利！🚀

