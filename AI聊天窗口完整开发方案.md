# AI èŠå¤©çª—å£å®Œæ•´å¼€å‘æ–¹æ¡ˆ

## æ–‡æ¡£ä¿¡æ¯
- **ç‰ˆæœ¬**: v1.0
- **åˆ›å»ºæ—¥æœŸ**: 2025å¹´
- **çŠ¶æ€**: ğŸ“‹ å¼€å‘æ–¹æ¡ˆ
- **ç›®æ ‡**: å®ç°åŠŸèƒ½å®Œæ•´ã€ç¨³å®šå¯é çš„ AI èŠå¤©çª—å£ï¼Œæ”¯æŒå·¥å…·è°ƒç”¨ã€æ–‡ä»¶ç®¡ç†ã€æ–‡æ¡£ç¼–è¾‘ç­‰å…¨åŠŸèƒ½

---

## ä¸€ã€éœ€æ±‚åˆ†æ

### 1.1 åŠŸèƒ½å®šä½

**AI èŠå¤©çª—å£**æ˜¯ Binder çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œæä¾›ä¸ AI çš„å¯¹è¯äº¤äº’ï¼Œå¹¶æ”¯æŒï¼š
- å¼•ç”¨ç³»ç»Ÿï¼ˆæ–‡æœ¬ã€æ–‡ä»¶ã€è®°å¿†åº“ã€é“¾æ¥ç­‰ï¼‰
- æ–‡ä»¶ç®¡ç†æ“ä½œï¼ˆåˆ›å»ºã€åˆ é™¤ã€é‡å‘½åã€å½’ç±»ç­‰ï¼‰
- æ–‡æ¡£å†…å®¹ä¿®æ”¹ï¼ˆå¯è§†åŒ– Diffã€å¤šå±‚ç¡®è®¤ï¼‰
- ç¼–è¾‘/èŠå¤©æ¨¡å¼åˆ‡æ¢

### 1.2 æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚

#### 1.2.1 å¼•ç”¨é€»è¾‘ç³»ç»Ÿ

**åŠŸèƒ½æè¿°**: ç”¨æˆ·å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¼•ç”¨å†…å®¹ï¼ŒAI å¯ä»¥åŸºäºå¼•ç”¨å†…å®¹è¿›è¡Œç†è§£å’Œæ“ä½œã€‚

**æ”¯æŒçš„å¼•ç”¨ç±»å‹**:

1. **æ–‡æœ¬å¼•ç”¨**
   - ç”¨æˆ·å¤åˆ¶çš„æ–‡æ¡£å†…å®¹
   - è‡ªåŠ¨è¯†åˆ«æ¥æºæ–‡ä»¶ã€è¡Œå·èŒƒå›´
   - æ”¯æŒå¤šæ®µæ–‡æœ¬å¼•ç”¨

2. **æ–‡ä»¶å¼•ç”¨**
   - æ‹–æ‹½æ–‡ä»¶åˆ°èŠå¤©çª—å£
   - `@æ–‡ä»¶å` è¯­æ³•å¼•ç”¨
   - æ˜¾ç¤ºæ–‡ä»¶è·¯å¾„ã€å¤§å°ã€ç±»å‹ç­‰ä¿¡æ¯

3. **è®°å¿†åº“å¼•ç”¨**
   - `@è®°å¿†åº“åç§°` å¼•ç”¨æ•´ä¸ªè®°å¿†åº“
   - å¤åˆ¶è®°å¿†åº“å†…å®¹æ—¶è‡ªåŠ¨è¯†åˆ«
   - æ˜¾ç¤ºè®°å¿†åº“çš„å®Œæ•´ä¿¡æ¯

4. **é“¾æ¥å¼•ç”¨**
   - ç”¨æˆ·è¾“å…¥æˆ–å¤åˆ¶çš„ URL
   - è‡ªåŠ¨è¯†åˆ«é“¾æ¥ç±»å‹ï¼ˆç½‘é¡µã€æœ¬åœ°æ–‡ä»¶è·¯å¾„ç­‰ï¼‰
   - æ˜¾ç¤ºé“¾æ¥é¢„è§ˆä¿¡æ¯

5. **çŸ¥è¯†åº“å¼•ç”¨**ï¼ˆåç»­æ‰©å±•ï¼‰
   - `@çŸ¥è¯†åº“:åç§°` è¯­æ³•
   - å¼•ç”¨çŸ¥è¯†åº“ä¸­çš„æ–‡æ¡£å’Œå†…å®¹

6. **èŠå¤©è®°å½•å¼•ç”¨**ï¼ˆåç»­æ‰©å±•ï¼‰
   - `@èŠå¤©:æ ‡é¢˜` å¼•ç”¨å†å²èŠå¤©
   - å¤åˆ¶èŠå¤©å†…å®¹æ—¶è‡ªåŠ¨è¯†åˆ«

**å¼•ç”¨æ˜¾ç¤ºæ ¼å¼**:
```
[å¼•ç”¨: æ–‡ä»¶] ğŸ“„ src/components/Editor.tsx (è¡Œ 10-25)
[å¼•ç”¨: æ–‡æœ¬] "è¿™æ˜¯å¤åˆ¶çš„æ–‡æœ¬å†…å®¹..." (æ¥æº: Editor.tsx:10)
[å¼•ç”¨: è®°å¿†åº“] ğŸ§  é¡¹ç›®éœ€æ±‚ (åŒ…å« 15 ä¸ªè®°å¿†é¡¹)
[å¼•ç”¨: é“¾æ¥] ğŸ”— https://example.com
```

#### 1.2.2 æ–‡ä»¶ç®¡ç†åŠŸèƒ½

**åŠŸèƒ½æè¿°**: AI å¯ä»¥æ ¹æ®ç”¨æˆ·æŒ‡ä»¤æ‰§è¡Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œã€‚

**æ”¯æŒçš„æ“ä½œ**:
- âœ… åˆ›å»ºæ–‡ä»¶ï¼ˆæŒ‡å®šè·¯å¾„ã€å†…å®¹ã€ç±»å‹ï¼‰
- âœ… åˆ é™¤æ–‡ä»¶ï¼ˆæ”¯æŒæ‰¹é‡åˆ é™¤ï¼‰
- âœ… é‡å‘½åæ–‡ä»¶/æ–‡ä»¶å¤¹
- âœ… åˆ›å»ºæ–‡ä»¶å¤¹
- âœ… ç§»åŠ¨æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼ˆå½’ç±»æ•´ç†ï¼‰
- âœ… å¤åˆ¶æ–‡ä»¶
- âœ… æ‰¹é‡æ“ä½œï¼ˆæ‰¹é‡åˆ›å»ºã€æ‰¹é‡ç§»åŠ¨ç­‰ï¼‰

**ç¡®è®¤æœºåˆ¶**:
- æ–‡ä»¶æ“ä½œå‰æ˜¾ç¤ºé¢„è§ˆ
- éœ€è¦ç”¨æˆ·ç¡®è®¤æ‰èƒ½æ‰§è¡Œ
- æ˜¾ç¤ºæ“ä½œå½±å“èŒƒå›´ï¼ˆå“ªäº›æ–‡ä»¶ä¼šè¢«å½±å“ï¼‰

#### 1.2.3 æ–‡æ¡£ä¿®æ”¹åŠŸèƒ½

**åŠŸèƒ½æè¿°**: AI å¯ä»¥ä¿®æ”¹æ–‡æ¡£å†…å®¹ï¼Œå¹¶ä»¥å¯è§†åŒ–æ–¹å¼å±•ç¤ºä¿®æ”¹ã€‚

**ä¿®æ”¹å±•ç¤º**:
- çº¢ç»¿æ ‡æ³¨ï¼ˆåˆ é™¤ç”¨çº¢è‰²ï¼Œæ·»åŠ ç”¨ç»¿è‰²ï¼‰
- è¡Œçº§åˆ«å¯¹æ¯”
- æ®µè½çº§åˆ«å¯¹æ¯”
- æ–‡æ¡£çº§åˆ«å¯¹æ¯”

**å¤šå±‚ç¡®è®¤æœºåˆ¶**:
- **æ®µè½çº§åˆ«ç¡®è®¤**: æ¯ä¸ªä¿®æ”¹æ®µè½æœ‰ç‹¬ç«‹çš„ç¡®è®¤æŒ‰é’®
- **æ–‡æ¡£çº§åˆ«ç¡®è®¤**: æ¯ä¸ªè¢«ä¿®æ”¹çš„æ–‡æ¡£æœ‰ç¡®è®¤æŒ‰é’®
- **å…¨éƒ¨ç¡®è®¤**: ä¸€æ¬¡æ€§ç¡®è®¤æ‰€æœ‰ä¿®æ”¹

**æ˜¾ç¤ºæ ¼å¼**:
```
ä¿®æ”¹æ–‡æ¡£: src/components/Editor.tsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ®µè½ 1 (è¡Œ 10-25)                   â”‚
â”‚ [ç¡®è®¤æ®µè½] [è·³è¿‡æ®µè½]                â”‚
â”‚ - const handleSave = () => { ...    â”‚
â”‚ + const handleSave = async () => {  â”‚
â”‚ +   await saveFile();               â”‚
â”‚    }                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ç¡®è®¤æ–‡æ¡£] [è·³è¿‡æ–‡æ¡£] [ç¡®è®¤å…¨éƒ¨ä¿®æ”¹]
```

#### 1.2.4 ç¼–è¾‘/èŠå¤©åˆ‡æ¢

**åŠŸèƒ½æè¿°**: åœ¨èŠå¤©çª—å£ä¸­å¯ä»¥åˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼ï¼Œç›´æ¥ç¼–è¾‘æ–‡ä»¶ã€‚

**åˆ‡æ¢æ–¹å¼**:
- èŠå¤©çª—å£é¡¶éƒ¨æ˜¾ç¤º"ç¼–è¾‘æ¨¡å¼"åˆ‡æ¢æŒ‰é’®
- å¿«æ·é”®ï¼š`Cmd/Ctrl+E` åˆ‡æ¢ç¼–è¾‘æ¨¡å¼
- åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹ï¼Œå³ä¾§æ˜¾ç¤ºæ–‡ä»¶ç¼–è¾‘å™¨

**ç¼–è¾‘æ¨¡å¼åŠŸèƒ½**:
- æ”¯æŒå¤šæ–‡ä»¶ç¼–è¾‘
- æ˜¾ç¤ºæ–‡ä»¶æ ‘
- æ”¯æŒä¿å­˜ã€æ’¤é”€ç­‰æ“ä½œ
- åˆ‡æ¢å›èŠå¤©æ¨¡å¼æ—¶ä¿æŒå¯¹è¯ä¸Šä¸‹æ–‡

---

## äºŒã€æŠ€æœ¯æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI èŠå¤©çª—å£æ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           å‰ç«¯å±‚ (React + TypeScript)            â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚    â”‚
â”‚  â”‚  â”‚ ChatPanel    â”‚  â”‚ ChatInput    â”‚            â”‚    â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚            â”‚    â”‚
â”‚  â”‚  â”‚ - æ¶ˆæ¯åˆ—è¡¨   â”‚  â”‚ - å¼•ç”¨è¾“å…¥   â”‚            â”‚    â”‚
â”‚  â”‚  â”‚ - Diffæ˜¾ç¤º   â”‚  â”‚ - æ–‡ä»¶æ‹–æ‹½   â”‚            â”‚    â”‚
â”‚  â”‚  â”‚ - ç¡®è®¤æŒ‰é’®   â”‚  â”‚ - @è¯­æ³•è§£æ  â”‚            â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ å¼•ç”¨ç³»ç»Ÿç»„ä»¶                              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - ReferenceManager (å¼•ç”¨ç®¡ç†å™¨)          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - FileReference (æ–‡ä»¶å¼•ç”¨)               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - TextReference (æ–‡æœ¬å¼•ç”¨)               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - MemoryReference (è®°å¿†åº“å¼•ç”¨)           â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - LinkReference (é“¾æ¥å¼•ç”¨)               â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ å·¥å…·è°ƒç”¨ç»„ä»¶                              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - ToolCallRenderer (å·¥å…·è°ƒç”¨æ¸²æŸ“)        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - FileOperationPreview (æ–‡ä»¶æ“ä½œé¢„è§ˆ)    â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - DocumentDiffView (æ–‡æ¡£ä¿®æ”¹è§†å›¾)        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - ConfirmationButtons (ç¡®è®¤æŒ‰é’®)         â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â†• IPC                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         åç«¯å±‚ (Rust + Tauri Commands)          â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚    â”‚
â”‚  â”‚  â”‚ AI Service   â”‚  â”‚ Tool Handler â”‚            â”‚    â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚            â”‚    â”‚
â”‚  â”‚  â”‚ - Chat       â”‚  â”‚ - File Ops   â”‚            â”‚    â”‚
â”‚  â”‚  â”‚ - Tools      â”‚  â”‚ - Diff Calc  â”‚            â”‚    â”‚
â”‚  â”‚  â”‚ - Streaming  â”‚  â”‚ - Ref Parse  â”‚            â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ å·¥å…·å‡½æ•°åº“                                â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - create_file                             â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - delete_file                             â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - rename_file                             â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - move_file                               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - read_file                               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - write_file                              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - create_directory                        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ - calculate_diff                          â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ•°æ®æµè®¾è®¡

```
ç”¨æˆ·è¾“å…¥ â†’ å¼•ç”¨è§£æ â†’ æ„å»ºæ¶ˆæ¯ â†’ AI å¤„ç† â†’ å·¥å…·è°ƒç”¨ â†’ ç»“æœå±•ç¤º
    â†“           â†“          â†“         â†“          â†“          â†“
æ‹–æ‹½æ–‡ä»¶   æå–å¼•ç”¨    åˆå¹¶å¼•ç”¨   æµå¼å“åº”   æ‰§è¡Œæ“ä½œ   ç¡®è®¤æ“ä½œ
å¤åˆ¶æ–‡æœ¬   è§£æ@è¯­æ³•   æ ¼å¼åŒ–     è§£æå·¥å…·   ç”Ÿæˆé¢„è§ˆ   åº”ç”¨ä¿®æ”¹
```

---

## ä¸‰ã€å¼•ç”¨ç³»ç»Ÿè¯¦ç»†è®¾è®¡

### 3.1 å¼•ç”¨æ•°æ®ç»“æ„

```typescript
// å¼•ç”¨ç±»å‹æšä¸¾
enum ReferenceType {
    TEXT = 'text',           // æ–‡æœ¬å¼•ç”¨
    FILE = 'file',           // æ–‡ä»¶å¼•ç”¨
    MEMORY = 'memory',       // è®°å¿†åº“å¼•ç”¨
    LINK = 'link',           // é“¾æ¥å¼•ç”¨
    KNOWLEDGE_BASE = 'kb',   // çŸ¥è¯†åº“å¼•ç”¨ï¼ˆåç»­ï¼‰
    CHAT = 'chat',           // èŠå¤©è®°å½•å¼•ç”¨ï¼ˆåç»­ï¼‰
}

// å¼•ç”¨åŸºç¡€æ¥å£
interface BaseReference {
    id: string;
    type: ReferenceType;
    createdAt: number;
}

// æ–‡æœ¬å¼•ç”¨
interface TextReference extends BaseReference {
    type: 'text';
    content: string;           // å¼•ç”¨çš„æ–‡æœ¬å†…å®¹
    sourceFile?: string;       // æ¥æºæ–‡ä»¶è·¯å¾„ï¼ˆå¦‚æœæœ‰ï¼‰
    lineRange?: {              // è¡Œå·èŒƒå›´ï¼ˆå¦‚æœæœ‰ï¼‰
        start: number;
        end: number;
    };
    charRange?: {              // å­—ç¬¦èŒƒå›´ï¼ˆå¦‚æœæœ‰ï¼‰
        start: number;
        end: number;
    };
}

// æ–‡ä»¶å¼•ç”¨
interface FileReference extends BaseReference {
    type: 'file';
    path: string;              // æ–‡ä»¶è·¯å¾„
    name: string;              // æ–‡ä»¶å
    size?: number;             // æ–‡ä»¶å¤§å°
    mimeType?: string;         // MIME ç±»å‹
    content?: string;          // æ–‡ä»¶å†…å®¹ï¼ˆå¯é€‰ï¼Œå¤§æ–‡ä»¶ä¸åŠ è½½ï¼‰
    lineCount?: number;        // è¡Œæ•°ï¼ˆæ–‡æœ¬æ–‡ä»¶ï¼‰
}

// è®°å¿†åº“å¼•ç”¨
interface MemoryReference extends BaseReference {
    type: 'memory';
    memoryId: string;          // è®°å¿†åº“ ID
    name: string;              // è®°å¿†åº“åç§°
    itemCount?: number;        // è®°å¿†é¡¹æ•°é‡
    items?: MemoryItem[];      // è®°å¿†é¡¹åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
}

// é“¾æ¥å¼•ç”¨
interface LinkReference extends BaseReference {
    type: 'link';
    url: string;               // URL
    title?: string;            // é“¾æ¥æ ‡é¢˜
    description?: string;      // é“¾æ¥æè¿°
    preview?: string;          // é“¾æ¥é¢„è§ˆå†…å®¹
}

// è”åˆç±»å‹
type Reference = TextReference | FileReference | MemoryReference | LinkReference;
```

### 3.2 å¼•ç”¨è¯†åˆ«é€»è¾‘

#### 3.2.1 æ–‡æœ¬å¼•ç”¨è¯†åˆ«

**è§¦å‘æ–¹å¼**:
1. ç”¨æˆ·å¤åˆ¶æ–‡æœ¬åï¼Œåœ¨èŠå¤©è¾“å…¥æ¡†ä¸­ç²˜è´´
2. ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹ç²˜è´´å†…å®¹æ˜¯å¦æ¥è‡ªç¼–è¾‘å™¨
3. å¦‚æœæ˜¯ï¼Œå°è¯•è¯†åˆ«æ¥æºæ–‡ä»¶å’Œä½ç½®

**è¯†åˆ«æµç¨‹**:
```typescript
// 1. ç›‘å¬ç²˜è´´äº‹ä»¶
onPaste(event: ClipboardEvent) {
    const text = event.clipboardData?.getData('text/plain');
    const html = event.clipboardData?.getData('text/html');
    
    // 2. æ£€æŸ¥æ˜¯å¦æœ‰æ¥æºä¿¡æ¯
    if (html) {
        // ä» HTML ä¸­æå–æ¥æºä¿¡æ¯ï¼ˆéœ€è¦åœ¨å¤åˆ¶æ—¶æ·»åŠ  metadataï¼‰
        const sourceInfo = extractSourceFromHTML(html);
        if (sourceInfo) {
            createTextReference(text, sourceInfo);
        }
    }
    
    // 3. æ£€æŸ¥å‰ªè´´æ¿ä¸­çš„è‡ªå®šä¹‰æ ¼å¼
    const sourceData = event.clipboardData?.getData('application/x-binder-source');
    if (sourceData) {
        const source = JSON.parse(sourceData);
        createTextReference(text, source);
    }
}
```

**å®ç°æ­¥éª¤**:
1. åœ¨ç¼–è¾‘å™¨å¤åˆ¶æ—¶ï¼Œæ·»åŠ æ¥æºä¿¡æ¯åˆ°å‰ªè´´æ¿
2. åœ¨èŠå¤©è¾“å…¥æ¡†ç²˜è´´æ—¶ï¼Œè§£ææ¥æºä¿¡æ¯
3. åˆ›å»ºæ–‡æœ¬å¼•ç”¨å¯¹è±¡

#### 3.2.2 æ–‡ä»¶å¼•ç”¨è¯†åˆ«

**è§¦å‘æ–¹å¼**:
1. æ‹–æ‹½æ–‡ä»¶åˆ°èŠå¤©è¾“å…¥æ¡†
2. `@æ–‡ä»¶å` è¯­æ³•è¾“å…¥
3. ä»æ–‡ä»¶æ ‘æ‹–æ‹½æ–‡ä»¶

**è¯†åˆ«æµç¨‹**:
```typescript
// æ–¹å¼1: æ–‡ä»¶æ‹–æ‹½
onDrop(event: DragEvent) {
    const files = event.dataTransfer?.files;
    if (files) {
        for (const file of Array.from(files)) {
            if (file instanceof File) {
                // æœ¬åœ°æ–‡ä»¶
                createFileReference(file.path);
            }
        }
    }
}

// æ–¹å¼2: @è¯­æ³•è§£æ
parseAtMentions(text: string): FileReference[] {
    const pattern = /@([^\s@]+)/g;
    const matches = [];
    let match;
    
    while ((match = pattern.exec(text)) !== null) {
        const fileName = match[1];
        // æœç´¢æ–‡ä»¶
        const filePath = findFileByName(fileName);
        if (filePath) {
            matches.push(createFileReference(filePath));
        }
    }
    
    return matches;
}
```

**å®ç°æ­¥éª¤**:
1. å®ç°æ–‡ä»¶æ‹–æ‹½å¤„ç†
2. å®ç° `@æ–‡ä»¶å` è¯­æ³•è§£æå™¨
3. æ–‡ä»¶æœç´¢å’ŒåŒ¹é…é€»è¾‘
4. åˆ›å»ºæ–‡ä»¶å¼•ç”¨å¯¹è±¡

#### 3.2.3 è®°å¿†åº“å¼•ç”¨è¯†åˆ«

**è§¦å‘æ–¹å¼**:
1. `@è®°å¿†åº“:åç§°` è¯­æ³•
2. ä»è®°å¿†åº“ç•Œé¢å¤åˆ¶å†…å®¹

**è¯†åˆ«æµç¨‹**:
```typescript
parseMemoryMentions(text: string): MemoryReference[] {
    const pattern = /@è®°å¿†åº“[ï¼š:]([^\s@]+)/g;
    const matches = [];
    let match;
    
    while ((match = pattern.exec(text)) !== null) {
        const memoryName = match[1];
        const memory = findMemoryByName(memoryName);
        if (memory) {
            matches.push(createMemoryReference(memory));
        }
    }
    
    return matches;
}
```

#### 3.2.4 é“¾æ¥å¼•ç”¨è¯†åˆ«

**è§¦å‘æ–¹å¼**:
1. ç”¨æˆ·è¾“å…¥ URL
2. ç²˜è´´ URL

**è¯†åˆ«æµç¨‹**:
```typescript
parseLinks(text: string): LinkReference[] {
    // URL æ­£åˆ™è¡¨è¾¾å¼
    const urlPattern = /(https?:\/\/[^\s]+)/g;
    const matches = [];
    let match;
    
    while ((match = urlPattern.exec(text)) !== null) {
        const url = match[1];
        matches.push(createLinkReference(url));
    }
    
    return matches;
}
```

### 3.3 å¼•ç”¨ç®¡ç†å™¨

```typescript
class ReferenceManager {
    private references: Map<string, Reference> = new Map();
    
    // æ·»åŠ å¼•ç”¨
    addReference(ref: Reference): string {
        const id = `ref-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
        this.references.set(id, { ...ref, id });
        return id;
    }
    
    // ç§»é™¤å¼•ç”¨
    removeReference(id: string): void {
        this.references.delete(id);
    }
    
    // è·å–æ‰€æœ‰å¼•ç”¨
    getAllReferences(): Reference[] {
        return Array.from(this.references.values());
    }
    
    // æ ¼å¼åŒ–å¼•ç”¨ä¸º AI å¯ç†è§£çš„æ ¼å¼
    formatForAI(refs: Reference[]): string {
        return refs.map(ref => this.formatReference(ref)).join('\n');
    }
    
    private formatReference(ref: Reference): string {
        switch (ref.type) {
            case 'text':
                return `[æ–‡æœ¬å¼•ç”¨] ${ref.content}\næ¥æº: ${ref.sourceFile || 'æœªçŸ¥'}${ref.lineRange ? ` (è¡Œ ${ref.lineRange.start}-${ref.lineRange.end})` : ''}`;
            case 'file':
                return `[æ–‡ä»¶å¼•ç”¨] ${ref.path}\nå¤§å°: ${ref.size ? formatFileSize(ref.size) : 'æœªçŸ¥'}`;
            case 'memory':
                return `[è®°å¿†åº“å¼•ç”¨] ${ref.name}\nåŒ…å« ${ref.itemCount || 0} ä¸ªè®°å¿†é¡¹`;
            case 'link':
                return `[é“¾æ¥å¼•ç”¨] ${ref.url}`;
            default:
                return '';
        }
    }
}
```

---

## å››ã€å·¥å…·è°ƒç”¨ç³»ç»Ÿè®¾è®¡

### 4.1 å·¥å…·å®šä¹‰

```typescript
// å·¥å…·ç±»å‹æšä¸¾
enum ToolType {
    CREATE_FILE = 'create_file',
    DELETE_FILE = 'delete_file',
    RENAME_FILE = 'rename_file',
    MOVE_FILE = 'move_file',
    CREATE_DIRECTORY = 'create_directory',
    READ_FILE = 'read_file',
    WRITE_FILE = 'write_file',
    SEARCH_FILES = 'search_files',
    MODIFY_DOCUMENT = 'modify_document',
}

// å·¥å…·è°ƒç”¨æ¥å£
interface ToolCall {
    id: string;
    type: ToolType;
    arguments: Record<string, any>;
    status: 'pending' | 'executing' | 'completed' | 'failed';
    result?: any;
    error?: string;
}

// å·¥å…·å‚æ•°å®šä¹‰
interface CreateFileParams {
    path: string;
    content: string;
    createDirectories?: boolean;
}

interface DeleteFileParams {
    paths: string[];
}

interface RenameFileParams {
    oldPath: string;
    newPath: string;
}

interface MoveFileParams {
    source: string;
    destination: string;
}

interface ModifyDocumentParams {
    filePath: string;
    changes: DocumentChange[];
}

interface DocumentChange {
    type: 'insert' | 'delete' | 'replace';
    line: number;
    oldText?: string;
    newText?: string;
}
```

### 4.2 AI æ¶ˆæ¯æ ¼å¼

```typescript
interface ChatMessage {
    id: string;
    role: 'user' | 'assistant' | 'system';
    content: string;
    references?: Reference[];        // å¼•ç”¨åˆ—è¡¨
    toolCalls?: ToolCall[];          // å·¥å…·è°ƒç”¨åˆ—è¡¨
    timestamp: number;
}
```

### 4.3 å·¥å…·è°ƒç”¨å¤„ç†æµç¨‹

```
AI å“åº”ï¼ˆåŒ…å«å·¥å…·è°ƒç”¨ï¼‰ â†’ è§£æå·¥å…·è°ƒç”¨ â†’ æ˜¾ç¤ºé¢„è§ˆ â†’ ç”¨æˆ·ç¡®è®¤ â†’ æ‰§è¡Œæ“ä½œ â†’ æ›´æ–°ç»“æœ
```

**åç«¯å®ç°**:
```rust
// å·¥å…·è°ƒç”¨ç»“æœ
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct ToolCallResult {
    pub tool_call_id: String,
    pub success: bool,
    pub result: Option<serde_json::Value>,
    pub error: Option<String>,
}

// å·¥å…·è°ƒç”¨å¤„ç†
async fn handle_tool_call(tool_call: ToolCall) -> ToolCallResult {
    match tool_call.type {
        ToolType::CREATE_FILE => {
            create_file_tool(tool_call.arguments).await
        }
        ToolType::DELETE_FILE => {
            delete_file_tool(tool_call.arguments).await
        }
        ToolType::MODIFY_DOCUMENT => {
            modify_document_tool(tool_call.arguments).await
        }
        // ... å…¶ä»–å·¥å…·
    }
}
```

---

## äº”ã€æ–‡æ¡£ä¿®æ”¹å¯è§†åŒ–è®¾è®¡

### 5.1 Diff æ•°æ®ç»“æ„

```typescript
interface DocumentDiff {
    filePath: string;
    changes: DiffChange[];
    totalAdditions: number;
    totalDeletions: number;
}

interface DiffChange {
    id: string;
    type: 'insert' | 'delete' | 'replace';
    line: number;
    oldLines: string[];      // åˆ é™¤çš„è¡Œ
    newLines: string[];      // æ–°å¢çš„è¡Œ
    context?: {
        before: string[];    // ä¸Šä¸‹æ–‡ï¼šä¹‹å‰å‡ è¡Œ
        after: string[];     // ä¸Šä¸‹æ–‡ï¼šä¹‹åå‡ è¡Œ
    };
    confirmed?: boolean;     // æ˜¯å¦å·²ç¡®è®¤
}

// æ®µè½çº§åˆ«çš„ Diffï¼ˆç”¨äºç¡®è®¤ï¼‰
interface ParagraphDiff {
    id: string;
    filePath: string;
    startLine: number;
    endLine: number;
    changes: DiffChange[];
    confirmed?: boolean;
}
```

### 5.2 Diff è§†å›¾ç»„ä»¶

```typescript
// æ–‡æ¡£çº§åˆ«çš„ Diff è§†å›¾
interface DocumentDiffViewProps {
    diff: DocumentDiff;
    onConfirmParagraph: (paragraphId: string) => void;
    onConfirmDocument: (filePath: string) => void;
    onConfirmAll: () => void;
    onReject: (paragraphId?: string) => void;
}

// æ®µè½çº§åˆ«çš„ Diff è§†å›¾
interface ParagraphDiffViewProps {
    paragraph: ParagraphDiff;
    onConfirm: () => void;
    onReject: () => void;
}

// å•è¡Œå˜åŒ–è§†å›¾
interface LineDiffViewProps {
    change: DiffChange;
    showContext?: boolean;
}
```

### 5.3 ç¡®è®¤æœºåˆ¶

**ä¸‰å±‚ç¡®è®¤**:
1. **æ®µè½çº§åˆ«**: æ¯ä¸ªä¿®æ”¹æ®µè½æœ‰ç‹¬ç«‹çš„"ç¡®è®¤æ®µè½"å’Œ"è·³è¿‡æ®µè½"æŒ‰é’®
2. **æ–‡æ¡£çº§åˆ«**: æ¯ä¸ªè¢«ä¿®æ”¹çš„æ–‡æ¡£æœ‰"ç¡®è®¤æ–‡æ¡£"å’Œ"è·³è¿‡æ–‡æ¡£"æŒ‰é’®
3. **å…¨éƒ¨çº§åˆ«**: é¡¶éƒ¨æœ‰"ç¡®è®¤å…¨éƒ¨ä¿®æ”¹"æŒ‰é’®

**ç¡®è®¤çŠ¶æ€ç®¡ç†**:
```typescript
interface ConfirmationState {
    paragraphs: Map<string, boolean>;  // paragraphId -> confirmed
    documents: Map<string, boolean>;   // filePath -> confirmed
    allConfirmed: boolean;
}
```

---

## å…­ã€ç¼–è¾‘/èŠå¤©åˆ‡æ¢è®¾è®¡

### 6.1 åˆ‡æ¢æŒ‰é’®ä½ç½®

åœ¨èŠå¤©çª—å£é¡¶éƒ¨æ ‡é¢˜æ å³ä¾§æ·»åŠ åˆ‡æ¢æŒ‰é’®ï¼š

```
[AI èŠå¤©] [æ¨¡å‹é€‰æ‹©] [æ–°å»ºå¯¹è¯] [åˆ‡æ¢ç¼–è¾‘æ¨¡å¼] [å…³é—­]
```

### 6.2 ç¼–è¾‘æ¨¡å¼å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ–‡ä»¶æ ‘         â”‚   ç¼–è¾‘å™¨åŒºåŸŸ      â”‚
â”‚                 â”‚                  â”‚
â”‚  - src/         â”‚  [æ ‡ç­¾é¡µ]        â”‚
â”‚    - Editor.tsx â”‚                  â”‚
â”‚    - ...        â”‚  [ç¼–è¾‘å™¨å†…å®¹]    â”‚
â”‚                 â”‚                  â”‚
â”‚                 â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 çŠ¶æ€ç®¡ç†

```typescript
interface ChatPanelState {
    mode: 'chat' | 'edit';
    editModeFiles: string[];        // ç¼–è¾‘æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶
    activeEditFile?: string;        // å½“å‰ç¼–è¾‘çš„æ–‡ä»¶
}
```

---

## ä¸ƒã€å®ç°è·¯å¾„

### 7.1 é˜¶æ®µ 1: å¼•ç”¨ç³»ç»ŸåŸºç¡€ (Week 1-2)

**ç›®æ ‡**: å®ç°åŸºç¡€çš„å¼•ç”¨è¯†åˆ«å’Œæ˜¾ç¤º

**ä»»åŠ¡æ¸…å•**:
- [ ] å®šä¹‰å¼•ç”¨æ•°æ®ç»“æ„
- [ ] å®ç° ReferenceManager ç±»
- [ ] å®ç°æ–‡æœ¬å¼•ç”¨è¯†åˆ«ï¼ˆå¤åˆ¶ç²˜è´´ï¼‰
- [ ] å®ç°æ–‡ä»¶å¼•ç”¨è¯†åˆ«ï¼ˆæ‹–æ‹½ï¼‰
- [ ] å®ç° `@æ–‡ä»¶å` è¯­æ³•è§£æ
- [ ] åœ¨èŠå¤©è¾“å…¥æ¡†æ˜¾ç¤ºå¼•ç”¨æ ‡ç­¾
- [ ] å¼•ç”¨æ ¼å¼åŒ–æ˜¾ç¤º

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¯ä»¥æ‹–æ‹½æ–‡ä»¶åˆ°èŠå¤©çª—å£ï¼Œæ˜¾ç¤ºæ–‡ä»¶å¼•ç”¨
- âœ… å¯ä»¥å¤åˆ¶æ–‡æœ¬åç²˜è´´ï¼Œæ˜¾ç¤ºæ–‡æœ¬å¼•ç”¨
- âœ… å¯ä»¥è¾“å…¥ `@æ–‡ä»¶å` å¼•ç”¨æ–‡ä»¶
- âœ… å¼•ç”¨æ ‡ç­¾å¯ä»¥åˆ é™¤

### 7.2 é˜¶æ®µ 2: å·¥å…·è°ƒç”¨åŸºç¡€ (Week 2-3)

**ç›®æ ‡**: å®ç°åŸºç¡€çš„å·¥å…·è°ƒç”¨æ¡†æ¶

**ä»»åŠ¡æ¸…å•**:
- [ ] å®šä¹‰å·¥å…·ç±»å‹å’Œæ¥å£
- [ ] åç«¯å®ç°å·¥å…·è°ƒç”¨å¤„ç†æ¡†æ¶
- [ ] AI å“åº”ä¸­è§£æå·¥å…·è°ƒç”¨
- [ ] å‰ç«¯æ˜¾ç¤ºå·¥å…·è°ƒç”¨å¡ç‰‡
- [ ] å®ç°åŸºç¡€çš„ `read_file` å·¥å…·
- [ ] å®ç°åŸºç¡€çš„ `create_file` å·¥å…·ï¼ˆä»…åˆ›å»ºï¼Œä¸æ‰§è¡Œï¼‰

**éªŒæ”¶æ ‡å‡†**:
- âœ… AI å¯ä»¥è°ƒç”¨å·¥å…·è¯»å–æ–‡ä»¶
- âœ… å·¥å…·è°ƒç”¨æ˜¾ç¤ºä¸ºå¡ç‰‡å½¢å¼
- âœ… å·¥å…·è°ƒç”¨ç»“æœæ­£ç¡®æ˜¾ç¤º

### 7.3 é˜¶æ®µ 3: æ–‡ä»¶ç®¡ç†å·¥å…· (Week 3-4)

**ç›®æ ‡**: å®ç°å®Œæ•´çš„æ–‡ä»¶ç®¡ç†å·¥å…·

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç° `create_file` å·¥å…·ï¼ˆå¸¦ç¡®è®¤ï¼‰
- [ ] å®ç° `delete_file` å·¥å…·ï¼ˆå¸¦ç¡®è®¤ï¼‰
- [ ] å®ç° `rename_file` å·¥å…·ï¼ˆå¸¦ç¡®è®¤ï¼‰
- [ ] å®ç° `move_file` å·¥å…·ï¼ˆå¸¦ç¡®è®¤ï¼‰
- [ ] å®ç° `create_directory` å·¥å…·ï¼ˆå¸¦ç¡®è®¤ï¼‰
- [ ] æ–‡ä»¶æ“ä½œé¢„è§ˆç»„ä»¶
- [ ] æ‰¹é‡æ“ä½œæ”¯æŒ

**éªŒæ”¶æ ‡å‡†**:
- âœ… AI å¯ä»¥åˆ›å»ºã€åˆ é™¤ã€é‡å‘½åã€ç§»åŠ¨æ–‡ä»¶
- âœ… æ‰€æœ‰æ“ä½œéƒ½æœ‰é¢„è§ˆå’Œç¡®è®¤æ­¥éª¤
- âœ… æ“ä½œç»“æœæ­£ç¡®åé¦ˆ

### 7.4 é˜¶æ®µ 4: æ–‡æ¡£ä¿®æ”¹å’Œ Diff (Week 4-6)

**ç›®æ ‡**: å®ç°æ–‡æ¡£ä¿®æ”¹å’Œå¯è§†åŒ– Diff

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç° Diff è®¡ç®—ç®—æ³•ï¼ˆåŸºäºè¡Œçš„ diffï¼‰
- [ ] å®ç° Diff è§†å›¾ç»„ä»¶ï¼ˆçº¢ç»¿æ ‡æ³¨ï¼‰
- [ ] å®ç°æ®µè½çº§åˆ«ç¡®è®¤
- [ ] å®ç°æ–‡æ¡£çº§åˆ«ç¡®è®¤
- [ ] å®ç°å…¨éƒ¨ç¡®è®¤åŠŸèƒ½
- [ ] ä¼˜åŒ– Diff æ˜¾ç¤ºæ€§èƒ½
- [ ] æ”¯æŒå¤§æ–‡ä»¶ Diffï¼ˆåˆ†å—æ˜¾ç¤ºï¼‰

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ–‡æ¡£ä¿®æ”¹æ­£ç¡®æ˜¾ç¤ºä¸ºçº¢ç»¿æ ‡æ³¨
- âœ… å¯ä»¥é€æ®µè½ç¡®è®¤ä¿®æ”¹
- âœ… å¯ä»¥é€æ–‡æ¡£ç¡®è®¤ä¿®æ”¹
- âœ… å¯ä»¥ä¸€æ¬¡æ€§ç¡®è®¤æ‰€æœ‰ä¿®æ”¹
- âœ… ç¡®è®¤åä¿®æ”¹æ­£ç¡®åº”ç”¨

### 7.5 é˜¶æ®µ 5: ç¼–è¾‘/èŠå¤©åˆ‡æ¢ (Week 6-7)

**ç›®æ ‡**: å®ç°ç¼–è¾‘æ¨¡å¼å’ŒèŠå¤©æ¨¡å¼çš„åˆ‡æ¢

**ä»»åŠ¡æ¸…å•**:
- [ ] æ·»åŠ æ¨¡å¼åˆ‡æ¢æŒ‰é’®
- [ ] å®ç°ç¼–è¾‘æ¨¡å¼å¸ƒå±€
- [ ] ç¼–è¾‘æ¨¡å¼æ–‡ä»¶æ ‘
- [ ] ç¼–è¾‘æ¨¡å¼æ–‡ä»¶ç¼–è¾‘å™¨
- [ ] çŠ¶æ€åŒæ­¥ï¼ˆç¼–è¾‘æ¨¡å¼ â†” èŠå¤©æ¨¡å¼ï¼‰
- [ ] å¿«æ·é”®æ”¯æŒ

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¯ä»¥åœ¨èŠå¤©å’Œç¼–è¾‘æ¨¡å¼é—´åˆ‡æ¢
- âœ… ç¼–è¾‘æ¨¡å¼å¯ä»¥æ­£å¸¸ç¼–è¾‘æ–‡ä»¶
- âœ… åˆ‡æ¢æ—¶ä¿æŒå¯¹è¯ä¸Šä¸‹æ–‡

### 7.6 é˜¶æ®µ 6: é«˜çº§å¼•ç”¨åŠŸèƒ½ (Week 7-8)

**ç›®æ ‡**: å®ç°è®°å¿†åº“ã€é“¾æ¥ç­‰é«˜çº§å¼•ç”¨

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°è®°å¿†åº“å¼•ç”¨ï¼ˆ`@è®°å¿†åº“:åç§°`ï¼‰
- [ ] å®ç°é“¾æ¥å¼•ç”¨è¯†åˆ«
- [ ] é“¾æ¥é¢„è§ˆåŠŸèƒ½
- [ ] ä¼˜åŒ–å¼•ç”¨æ˜¾ç¤ºæ ·å¼
- [ ] å¼•ç”¨ç®¡ç†é¢æ¿

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¯ä»¥å¼•ç”¨è®°å¿†åº“
- âœ… å¯ä»¥å¼•ç”¨é“¾æ¥
- âœ… é“¾æ¥å¯ä»¥æ˜¾ç¤ºé¢„è§ˆ

### 7.7 é˜¶æ®µ 7: ä¼˜åŒ–å’Œæµ‹è¯• (Week 8-9)

**ç›®æ ‡**: ä¼˜åŒ–æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œå®Œå–„æµ‹è¯•

**ä»»åŠ¡æ¸…å•**:
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆå¤§æ–‡ä»¶å¤„ç†ã€å¤§é‡å¼•ç”¨ï¼‰
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] è¾¹ç•Œæƒ…å†µæµ‹è¯•
- [ ] ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- [ ] æ–‡æ¡£å®Œå–„

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ‰€æœ‰åŠŸèƒ½ç¨³å®šå¯é 
- âœ… æ€§èƒ½æ»¡è¶³è¦æ±‚
- âœ… é”™è¯¯å¤„ç†å®Œå–„

---

## å…«ã€å…³é”®æŠ€æœ¯ç‚¹

### 8.1 å¼•ç”¨è¯†åˆ«

**å¤åˆ¶æ–‡æœ¬æ—¶æ·»åŠ æ¥æºä¿¡æ¯**:
```typescript
// åœ¨ç¼–è¾‘å™¨ä¸­å¤åˆ¶æ—¶
document.addEventListener('copy', (e) => {
    const selection = window.getSelection();
    if (selection && selection.rangeCount > 0) {
        const range = selection.getRangeAt(0);
        const sourceInfo = {
            filePath: currentFilePath,
            lineRange: getLineRange(range),
            charRange: getCharRange(range),
        };
        
        // æ·»åŠ åˆ°å‰ªè´´æ¿
        e.clipboardData?.setData('application/x-binder-source', JSON.stringify(sourceInfo));
    }
});
```

### 8.2 Diff è®¡ç®—

**ä½¿ç”¨ diff åº“**ï¼ˆå‰ç«¯å¯ä»¥ä½¿ç”¨ `diff` åº“ï¼Œåç«¯å¯ä»¥ä½¿ç”¨ Rust çš„ `similar` åº“ï¼‰:
```typescript
import diff from 'diff';

function calculateDiff(oldText: string, newText: string): DiffChange[] {
    const lines = diff.diffLines(oldText, newText);
    const changes: DiffChange[] = [];
    let lineNumber = 1;
    
    for (const part of lines) {
        if (part.added) {
            changes.push({
                type: 'insert',
                line: lineNumber,
                newLines: part.value.split('\n'),
            });
            lineNumber += part.count || 0;
        } else if (part.removed) {
            changes.push({
                type: 'delete',
                line: lineNumber,
                oldLines: part.value.split('\n'),
            });
            // åˆ é™¤ä¸å¢åŠ è¡Œå·
        } else {
            lineNumber += part.count || 0;
        }
    }
    
    return changes;
}
```

### 8.3 å·¥å…·è°ƒç”¨è§£æ

**ä» AI å“åº”ä¸­è§£æå·¥å…·è°ƒç”¨**:
```typescript
// AI å“åº”æ ¼å¼ï¼ˆå‚è€ƒ OpenAI Function Callingï¼‰
interface AIResponse {
    content: string;
    tool_calls?: Array<{
        id: string;
        type: string;
        function: {
            name: string;
            arguments: string;  // JSON å­—ç¬¦ä¸²
        };
    }>;
}

// è§£æå·¥å…·è°ƒç”¨
function parseToolCalls(response: AIResponse): ToolCall[] {
    if (!response.tool_calls) return [];
    
    return response.tool_calls.map(tc => ({
        id: tc.id,
        type: tc.function.name as ToolType,
        arguments: JSON.parse(tc.function.arguments),
        status: 'pending',
    }));
}
```

---

## ä¹ã€ç¨³å®šæ€§ä¿éšœ

### 9.1 é”™è¯¯å¤„ç†

**åˆ†å±‚é”™è¯¯å¤„ç†**:
1. **UI å±‚**: æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º
2. **ä¸šåŠ¡å±‚**: è®°å½•é”™è¯¯æ—¥å¿—ï¼Œæä¾›é™çº§æ–¹æ¡ˆ
3. **åç«¯å±‚**: è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œé”™è¯¯ç 

### 9.2 æ€§èƒ½ä¼˜åŒ–

**ä¼˜åŒ–ç­–ç•¥**:
- å¤§æ–‡ä»¶åˆ†å—è¯»å–å’Œå¤„ç†
- å¤§é‡å¼•ç”¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
- Diff è®¡ç®—ä½¿ç”¨ Web Worker
- å·¥å…·è°ƒç”¨ç»“æœç¼“å­˜

### 9.3 æ•°æ®ä¸€è‡´æ€§

**ç¡®ä¿æ“ä½œåŸå­æ€§**:
- æ–‡ä»¶æ“ä½œä½¿ç”¨äº‹åŠ¡
- ä¿®æ”¹ç¡®è®¤å‰ä¸å®é™…ä¿®æ”¹æ–‡ä»¶
- æ”¯æŒå›æ»šæ“ä½œ

---

## åã€éªŒæ”¶æ ‡å‡†

### 10.1 åŠŸèƒ½å®Œæ•´æ€§

- âœ… æ‰€æœ‰å¼•ç”¨ç±»å‹æ­£å¸¸å·¥ä½œ
- âœ… æ‰€æœ‰æ–‡ä»¶ç®¡ç†å·¥å…·æ­£å¸¸å·¥ä½œ
- âœ… æ–‡æ¡£ä¿®æ”¹å’Œç¡®è®¤æœºåˆ¶å®Œæ•´
- âœ… ç¼–è¾‘/èŠå¤©åˆ‡æ¢æµç•…

### 10.2 ç¨³å®šæ€§

- âœ… æ— å´©æºƒå’Œå†…å­˜æ³„æ¼
- âœ… é”™è¯¯å¤„ç†å®Œå–„
- âœ… è¾¹ç•Œæƒ…å†µå¤„ç†æ­£ç¡®

### 10.3 ç”¨æˆ·ä½“éªŒ

- âœ… äº¤äº’æµç•…è‡ªç„¶
- âœ… æç¤ºä¿¡æ¯æ¸…æ™°
- âœ… æ“ä½œåé¦ˆåŠæ—¶

---

## åä¸€ã€åç»­æ‰©å±•

### 11.1 çŸ¥è¯†åº“å¼•ç”¨

- çŸ¥è¯†åº“ç³»ç»Ÿé›†æˆ
- `@çŸ¥è¯†åº“:åç§°` è¯­æ³•æ”¯æŒ

### 11.2 èŠå¤©è®°å½•å¼•ç”¨

- å†å²èŠå¤©è®°å½•æœç´¢
- `@èŠå¤©:æ ‡é¢˜` è¯­æ³•æ”¯æŒ

### 11.3 æ›´å¤šå·¥å…·

- ä»£ç æ‰§è¡Œå·¥å…·
- æ•°æ®åº“æŸ¥è¯¢å·¥å…·
- API è°ƒç”¨å·¥å…·

---

## é™„å½•

### A. å‚è€ƒå®ç°

- **Cursor**: ä»£ç ç¼–è¾‘å™¨çš„ AI èŠå¤©åŠŸèƒ½
- **Void**: VS Code çš„ AI èŠå¤©å®ç°

### B. ç›¸å…³æ–‡æ¡£

- `è‡ªåŠ¨ç»­å†™åŠŸèƒ½å®Œæ•´è§£å†³æ–¹æ¡ˆ.md`
- `é¡¹ç›®å…¨é¢åˆ†ææŠ¥å‘Š.md`
- `Binderäº§å“å¼€å‘æ–¹æ¡ˆ.md`

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025å¹´  
**ç»´æŠ¤è€…**: Binder å¼€å‘å›¢é˜Ÿ

